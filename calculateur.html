<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Calculateur Cosmologique</title>
    <style>
        body { font-family: monospace; background-color: #1c1c1c; color: white; padding: 2em; }
        #output { white-space: pre-wrap; background-color: black; border: 1px solid grey; padding: 1em; min-height: 200px; }
        button { font-size: 1.2em; padding: 0.5em 1em; }
    </style>
</head>
<body>

    <h1>Calculateur Cosmologique</h1>
    <button id="runButton">Lancer le Script</button>
    
    <h2>Résultat :</h2>
    <pre id="output">Les résultats apparaîtront ici...</pre>

    <script>
        const runButton = document.getElementById('runButton');
        const outputDiv = document.getElementById('output');
        
        // L'URL qui fonctionne parfaitement quand on la met dans le navigateur
        const apiUrl = 'https://phi1618.space/api/run-script/test';

        runButton.addEventListener('click', function() {
            outputDiv.textContent = 'Chargement...';
            
            // On utilise une méthode différente pour faire la requête
            fetch(apiUrl)
                .then(response => {
                    // On vérifie si la requête a réussi
                    if (!response.ok) {
                        // Si non, on crée une erreur avec le statut
                        throw new Error('Erreur réseau, statut : ' + response.status);
                    }
                    // Si oui, on demande le contenu en format JSON
                    return response.json();
                })
                .then(data => {
                    // Quand on reçoit le JSON, on affiche la partie "output"
                    outputDiv.textContent = data.output;
                })
                .catch(error => {
                    // Si une erreur s'est produite à n'importe quelle étape, on l'affiche
                    outputDiv.textContent = 'Une erreur est survenue : \n' + error.toString();
                });
        });
    </script>

</body>
</html>
